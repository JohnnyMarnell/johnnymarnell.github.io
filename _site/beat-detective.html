<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Your awesome title | Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</title>
<meta name="generator" content="Jekyll v3.9.5" />
<meta property="og:title" content="Your awesome title" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/beat-detective.html" />
<meta property="og:url" content="http://localhost:4000/beat-detective.html" />
<meta property="og:site_name" content="Your awesome title" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Your awesome title" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Your awesome title","url":"http://localhost:4000/beat-detective.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Your awesome title" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Your awesome title</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Johnny Marnell</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title"></h1>
  </header>

  <div class="post-content">
    <h4 id="live-beat-sync-with-librosa">Live Beat Sync with Librosa</h4>

<p><a href="https://www.youtube.com/watch?v=wihCkwniqwU">
<img src="https://img.youtube.com/vi/wihCkwniqwU/maxresdefault.jpg" />
</a>
<a href="https://www.youtube.com/watch?v=wihCkwniqwU"><strong><em>‚òùüèªSTART HERE‚òùüèª: Quick Demo Video showing detection and sync</em></strong></a></p>

<p><a href="/led-art.html"><strong><em>See it Live with LEDs</em></strong></a></p>

<p><a href="/jupyter/tempo.html"><strong><em>Jupyter Notebook Prototyping</em></strong></a></p>

<p>I read about and tried a few solutions for beat detection like Ableton‚Äôs built-in BeatSeeker, but I couldn‚Äôt get anything reliable. I decided to try my own approach using <a href="https://librosa.org">Librosa</a>, which is chock full of great stuff, including some beat/onset envelope detection algorithms.</p>

<p>I think it‚Äôs mostly meant for batch analyzing long, predetermined audio files, whereas I want a Near Real-Time solution. It‚Äôs my understanding that professional DJ live events will use already prepared metadata-tagged and beat-annotated audio files (like those through <a href="https://rekordbox.com">Rekordbox</a>), whereas we‚Äôll be switching sound Bluetooth sound sources, playlists, and (hopefully soon) using it during playing live gigs with instruments and vocals.</p>

<p>My approach was to use python real time audio buffer handling (a new challenge for me to begin with, I‚Äôve worked mostly with MIDI), and do periodic analysis on varying windows back in time (e.g. 5, 10 and 60 seconds). I tried a few libraries for this and found <a href="https://pypi.org/project/PyAudio">PyAudio</a> to work the best.</p>

<p>The thinking is that, a song (often ~4 minutes) won‚Äôt change tempo frequently nor drastically once it‚Äôs being played, so we can use short predictions of the recent past to predict the next beats of the short term future (essentially just choosing one analyzed detected beat event and tempo in the near past, and adding multiples forward into the future, reassessing and averaging as we go).</p>

<p>I think it‚Äôs working surprisingly well, even in early stages. Here‚Äôs a <a href="/jupyter/tempo.html">Jupyter notebook</a> with initial experimenting, plus a <a href="https://www.youtube.com/watch?v=wihCkwniqwU">video</a>
using this model married with realtime processing of playing audio to fire <a href="https://en.wikipedia.org/wiki/Open_Sound_Control">OSC</a> beat events.</p>

<p>Those events are sent to <a href="https://chromatik.co/">LX Studio / Chromatik</a>
(a.k.a. the Ableton Live of light) and I have a simple custom pattern (radiating circles) firing from these beat events. We used this live with <a href="/led-art.html">our beautiful LEDs</a> here as well.</p>

<p>Some source code <a href="https://github.com/JohnnyMarnell/iqe?tab=readme-ov-file#audio-analysis">here</a>.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Your awesome title</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Your awesome title</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
